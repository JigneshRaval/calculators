<div class="formField card_front" style="margin-top: 8px;padding: 0px 15px;">
    <div class="textQuoteClass" style="padding: 0px 0px 0px 0px;">HRA Exemption Calculator</div>
    <div class="spacer10"></div>
    <div class="fieldHeadTxt">
        <span>Basic salary received (p.a)<span style="color:red;float:none" "="">*</span>
                <span class=" more-btn"></span>
            <div class="tool-tip" style="display: none;">
                <p>This is the amount paid to the employee without any additions or allowances</p>
            </div>
        </span>
        <div class="spacer15"></div>
        <input id="basicSal" type="text" tabindex="1" value="">
    </div>
    <div class="spacer15 hideSpaceClass"></div>
    <div class="fieldHeadTxt">
        <span>Dearness Allowance received<span style="color:red;float:none">*</span>
            <span class="more-btn"></span>
            <div class="tool-tip" style="display: none;">
                <p>Cost of living adjustment allowance paid to Government employees and pensioners. Please enter
                    "0" if you do not receive dearness allowance.</p>
            </div>
        </span>
        <div class="spacer15"></div>
        <input id="DA" type="text" tabindex="2" value="">
    </div>
    <div class="spacer15 disClass"></div>
    <div class="border1pxClass disClass"></div>
    <div class="spacer15 disClass"></div>
    <div class="spacer15 hideSpaceClass"></div>
    <div class="fieldHeadTxt">
        <span>HRA received (p.a)<span style="color:red;float:none">*</span>
            <span class="more-btn"></span>
            <div class="tool-tip" style="display: none;">
                <p>Component of the salary given by a company to its employee to meet house renting expenses</p>
            </div>
        </span>
        <div class="spacer15"></div>
        <input id="hraReceived" type="text" tabindex="3" value="">
    </div>
    <div class="spacer15 hideSpaceClass"></div>
    <div class="fieldHeadTxt">
        <span>Total rent paid (p.a)<span style="color:red;float:none">*</span>
            <!--<span class="more-btn" title="Total rent paid"></span>
                <div class="tool-tip">
                    <p>Total rent paid</p>
                </div>-->
        </span>
        <div class="spacer15"></div>
        <input id="rentPaid" type="text" tabindex="4" value="">
    </div>
    <div class="spacer15 disClass"></div>
    <div class="border1pxClass disClass"></div>
    <div class="spacer15 disClass"></div>
    <div class="spacer15 hideSpaceClass"></div>
    <div class="fieldHeadTxt" style="width:100%;">
        <span>Do you live in metros like Delhi, Mumbai, Kolkata or Chennai?<span
                style="color:red;float:none">*</span></span>
        <div class="spacer10"></div>
        <div class="form-cont">
            <div class="mod-radio-box">
                <input type="radio" id="yes" name="metro" value="yes" checked="checked">
                <label for="yes">
                    <span class="text-icon male1">Yes</span>
                    <span class="icon"></span>
                </label>
            </div>
            <div class="mod-radio-box checked">
                <input type="radio" id="no" name="metro" value="no">
                <label for="no">
                    <span class="text-icon female1">No</span>
                    <span class="icon"></span>
                </label>
            </div>
        </div>
    </div>

    <div class="spacer20"></div>
    <div class="inputMainClass">
        <a class="main-action-btn small-btn subButton" href="javascript:void(0)"
            onclick="claculateFun();return false;">Calculate Now</a>
    </div>
    <span
        style="font-size: 10px; float: right; cursor: unset; height: 18px; margin: -13px; padding: 0px; position: relative; right: 12px;">
        <font style="color: red;">*</font>Marked fields are mandatory
    </span>
</div>

<div class="formField card_back">

    <div class="calcTxaCharge">
        <h3>TAXABLE HRA</h3>
        <div class="calcTxtAmt">
            <img src="/etc/designs/icicipru/hra-calc/images_calc/rupee_white.png">
            <span class="includeGrossSalary">60,000</span>
        </div>
    </div>

    <div class="adjuPaddIngClass">
        <div class="leastTxt">*The least of the below values is exempt from HRA</div>
        <div class="table-content">
            <table>
                <tbody>
                    <tr class="fundTable-color2">
                        <td>Actual HRA received</td>
                        <td><img src="/etc/designs/icicipru/hra-calc/images_calc/rupee_3.png"><span
                                class="actualHRAAmt">2,52,000</span></td>
                    </tr>
                    <tr class="fundTable-color1">
                        <td>Rent Paid in excess of 10% of salary</td>
                        <td><img src="/etc/designs/icicipru/hra-calc/images_calc/rupee_3.png"><span
                                class="rentPaidExcessAmt">1,92,000</span></td>
                    </tr>
                    <tr class="fundTable-color2">
                        <td><span class="metroAmt">40%</span> of Basic Salary</td>
                        <td><img src="/etc/designs/icicipru/hra-calc/images_calc/rupee_3.png"><span
                                class="salaryTakeAmt">1,92,000</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="showResultCalc">
            <ul>

                <li>
                    <span style="float:left;">Amount of exempted HRA</span>
                    <span class="exemptAmt " style="float:right;">1,92,000</span>
                    <img src="/etc/designs/icicipru/hra-calc/images_calc/rupee_3.png">
                </li>
                <li>
                    <span style="float:left;">HRA chargeable to Tax</span>
                    <span class="chargeableTaxAmt" style="float:right;">60,000</span>
                    <img src="/etc/designs/icicipru/hra-calc/images_calc/rupee_3.png">
                </li>
            </ul>
        </div>
        <div class="spacer20"></div>
        <div class="inputMainClass">
            <a class="main-action-btn small-btn subButton" href="javascript:void(0)"
                onclick="reverseFlip();return false;">Calculate Again </a>
        </div>

        <div class="spacer10"></div>
    </div>
</div>

<!-- Thank you note with Logo -->
<div class="text-center thanks-section">Thanks to <a href="https://www.iciciprulife.com/insurance-guide/financial-planning-tools-calculators/hra-exemption-calculator.html" target="_blank">ICICI</a></div>
<!-- Thank you note with Logo -->

<script>
    $(document).ready(function () {
        if ($(".mod-radio-box").length != 0) {
            var rdbtnName = $(".mod-radio-box input[type=radio]");
            radioClick(rdbtnName);
        }

        $('#basicSal, #DA, #hraReceived, #rentPaid, #mobNo').bind("keypress", function (event) {
            if (onlyNumbers(event)) {
                return true;
            }
            else {
                return false;
            }
        });
        $('#basicSal, #DA, #hraReceived, #rentPaid').on('focus', function (event) {
            $(this).val(removeCommas($(this).val()));
        });
        $('#basicSal, #DA, #hraReceived, #rentPaid').on('blur', function (event) {
            var Curr_Val = $(this).val();
            $(this).val(addCommas(Curr_Val));
        });
    });

    function radioClick(valradio) {
        var btnrad = $(valradio);
        $(btnrad).each(function () {
            if ($(this).is(":checked") == true) {
                $(this).parent().addClass("checked");
            } else {
                $(this).parent().removeClass("checked");
            }
        });

        $(btnrad).change(function () {
            $(btnrad).each(function () {
                if ($(this).is(":checked") == true) {
                    $(this).parent().addClass("checked");
                } else {
                    $(this).parent().removeClass("checked");
                }
            })
        });
    }

    function onlyNumbers(event) {
        //console.log(event.keyCode);
        if (event.keyCode != 0) {
            if (event.keyCode < 48 || event.keyCode > 57) {
                if (event.keyCode != 8 && event.keyCode != 9 && event.keyCode != 46 && event.keyCode != 37 && event.keyCode != 39 && event.keyCode != 13) {
                    event.returnValue = false;
                    return false;
                }
            }
        }
        else {
            if (event.charCode < 48 || event.charCode > 57) {
                if (event.charCode != 8 && event.charCode != 9 && event.charCode != 46 && event.charCode != 37 && event.charCode != 39 && event.charCode != 13) {
                    event.preventDefault();
                    return false;
                }
            }
        }
        return true;
    }

    function addCommas(nStr) {
        nStr += '';
        x = nStr.split('.');
        x1 = x[0];
        x2 = x.length > 1 ? '.' + x[1] : '';
        var rgx = /(\d+)(\d{3})/;
        var z = 0;
        var len = String(x1).length;
        var num = parseInt((len / 2) - 1);
        while (rgx.test(x1)) {
            if (z > 0) {
                x1 = x1.replace(rgx, '$1' + ',' + '$2');
            } else {
                x1 = x1.replace(rgx, '$1' + ',' + '$2');
                rgx = /(\d+)(\d{2})/;
            }
            z++;
            num--;
            if (num == 0) {
                break;
            }
        }
        return x1 + x2;
    }

    function removeCommas(numWidCommas) {
        var numWidoutCommas = numWidCommas.replace(/[,]/g, '');
        return numWidoutCommas;
    }

    function claculateFun() {
        var basicSal = removeCommas($("#basicSal").val());
        var DAamt = removeCommas($("#DA").val());
        var hraReceived = removeCommas($("#hraReceived").val());
        var rentPaid = removeCommas($("#rentPaid").val());
        //var mobileno = $("#mobNo").val();
        //var email = $("#emailId").val();
        if (basicSal == "") {
            alert("Please enter your Basic Salary");
            $("#basicSal").focus();
            //event.stopImmediatePropagation();
            return false;
        }
        else if (DAamt == "") {
            alert("Please enter Dearness Allowance ");
            $("#DA").focus();
            //event.stopImmediatePropagation();
            return false;
        }
        else if (hraReceived == "") {
            alert("Please enter House Rent Allowance");
            $("#hraReceived").focus();
            //event.stopImmediatePropagation();
            return false;
        }
        else if (rentPaid == "") {
            alert("Please enter how much Actual Rent Paid ");
            $("#rentPaid").focus();
            //event.stopImmediatePropagation();
            return false;
        }
        else if ($('input:radio[name=metro]:checked').val() == undefined) {
            alert("Please choose do you live in metros");
            //event.stopImmediatePropagation();
            return false;
        }

        // flipFunction();

        calcEBIFun(basicSal, DAamt, hraReceived, rentPaid);
    }


    function calcEBIFun(basicSalary, DAamtValue, hraReceivedAmt, rentValue) {
        var salary = parseInt(basicSalary) + parseInt(DAamtValue);
        var actualHRA = parseInt(hraReceivedAmt);
        var salaryTake;
        var exemptAmt = 0;
        var includeGrossSalary = 0;
        var metroAmt;
        var metroArea = $('input:radio[name=metro]:checked').val();
        //alert(metroArea);
        if (metroArea == 'no') {
            salaryTake = Math.round(salary * 0.4);
            metroAmt = '40%';
        } else {
            salaryTake = Math.round(salary * 0.5);
            metroAmt = '50%';
        }
        //if(actualHRA > parseInt(DAamtValue)){
        includeGrossSalary = salary * 0.1;
        //	}
        //exemptAmt = actualHRA - includeGrossSalary;
        //exemptAmt = parseInt(rentValue) - salary * 0.1;
        //exemptAmt = parseInt(rentValue) - includeGrossSalary;
        rentPaidExcessAmt = Math.round(parseInt(rentValue) - includeGrossSalary);
        if (rentPaidExcessAmt < 0) {
            rentPaidExcessAmt = 0;
        }
        exemptAmt = Math.min(rentPaidExcessAmt, salaryTake, actualHRA);
        if (exemptAmt < 0) {
            exemptAmt = 0;
        }
        chargeTax = Math.round(actualHRA - exemptAmt);
        if (chargeTax <= 0) {
            chargeTax = 0;
            $('.includeGrossSalary').text("NO TAX PAYABLE TO HRA");
            $('.calcTxtAmt img').hide();
            $('.calcTxaCharge h3').hide();
        } else {
            $('.calcTxaCharge h3').show();
            $('.calcTxtAmt img').show();
            $('.includeGrossSalary').text(addCommas(chargeTax));
        }
        //console.log(actualHRA+" "+exemptAmt+" "+includeGrossSalary+" "+salaryTake);
        //$('.includeGrossSalary').text(addCommas(chargeTax));
        $('.salaryTakeAmt').text(addCommas(salaryTake));
        $('.actualHRAAmt').text(addCommas(actualHRA));
        $('.rentPaidExcessAmt').text(addCommas(rentPaidExcessAmt));
        $('.exemptAmt').text(addCommas(exemptAmt));
        $('.metroAmt').text(metroAmt);
        $('.chargeableTaxAmt').text(addCommas(chargeTax));
    }

</script>

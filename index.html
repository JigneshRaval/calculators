<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="robots" content="noindex, follow">
    <title>Calculator : Home</title>

    <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700&display=swap" rel="stylesheet">
    <!-- Add manifest -->
    <link rel="manifest" href="./manifest.json">
    <!-- Tell the browser it's a PWA -->
    <meta name="mobile-web-app-capable" content="yes">
    <!-- Tell iOS it's a PWA -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- Make sure theme-color is defined -->
    <meta name="theme-color" content="#536878">
    <!-- ===========================================
        CSS
    ============================================ -->
    <link rel="stylesheet" href="./css/bootstrap.css" />
    <link rel="stylesheet" href="./css/main.css" />

    <script src="./js/jquery-3.4.1.js"></script>
    <script src="./js/bootstrap.bundle.js"></script>
    <script>
        function handleLoad(e) {
            console.log('Loaded import: ' + e.target.href);
        }

        function handleError(e) {
            console.log('Error loading import: ' + e.target.href);
        }
    </script>
    <!-- Imports HTML -->
    <!-- <link rel="import" href="./sip-calculator.html" onload="handleLoad(event)" onerror="handleError(event)"> -->
</head>

<body>
    <!-- <button className="ad2hs-prompt uk-button uk-button-primary">Add to Home</button> -->
    <header></header>

    <div class="container main-content">
        <!-- <include src="simple-interest-calculator.html">Loading...</include> -->
    </div>

    <footer class="text-center">
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#disclaimerModal">
            Read Disclaimer
        </button>
    </footer>
    <!-- The actual snackbar -->
    <div id="snackbar">A new version of this app is available. Click <button class="btn btn-primary"
            id="reload">here</button> to update.</div>

    <!-- START : Disclaimer Modal -->
    <div class="modal fade" id="disclaimerModal" tabindex="-1" role="dialog" aria-labelledby="disclaimerModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="disclaimerModalLabel">Disclaimer</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="disclaimer-content">
                        <p>This app/site is just for community/society help, it is non-commercial & non-profitable, we
                            have
                            try to club here all financial calculators from different sites/apps and we are thanking to
                            all
                            those sites/apps for their contribution for society.</p>

                        <p>We are thankful to <a href="https://www.etmoney.com/" target="_blank">ETMoney</a>, <a
                                href="https://groww.in/" target="_blank">Groww</a></p>

                        <p>All calculators are just for illustrations purpose, we are not responsible for any type of
                            your
                            profit and loss.</p>

                        <p>We do not have any intention to make profit from this site/app and If we have any financial
                            benefit from this site/app that we will use for community welfare, only apart from
                            maintenance/infrastructure cost.</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" onclick="savePreferences()">Don't show again</button>
                </div>
            </div>
        </div>
    </div>
    <!-- END : Disclaimer Modal -->

    <script>
        // Method 1 : Include another HTML files
        // https://stackoverflow.com/questions/8988855/include-another-html-file-in-a-html-file
        // Usage : <include src="simple-interest-calculator.html">Loading...</include>
        (() => {
            const includes = document.getElementsByTagName('include');
            [].forEach.call(includes, i => {
                let filePath = i.getAttribute('src');
                fetch(filePath).then(file => {
                    file.text().then(content => {
                        $('.container').html(content);
                        // i.insertAdjacentHTML('afterend', content);
                        // i.remove();
                    });
                });
            });
        })();

        // Document Ready check
        document.addEventListener("DOMContentLoaded", function () {

            if(!localStorage.getItem('Disclaimer_Visited')) {
                $('#disclaimerModal').modal('show');
            }

            // console.log('Your document is ready!');
            // close menu
            document.body.addEventListener('click', (event) => {
                let chkMenu = document.querySelector('#toggleMenu');

                if (event && event.target.closest('header')) {

                } else {

                    if (chkMenu) {
                        chkMenu.checked = false;
                    }
                }
            });

            // Method 2 : using import
            /* function supportsImports() {
                return 'import' in document.createElement('link');
            }

            if (supportsImports()) {
                // Good to go!
                var link = document.querySelector('link[rel="import"]');
                var content = link.import;

                // Grab DOM from warning.html's document.
                if (content) {
                    var el = content.querySelector('.container');

                    document.body.appendChild(el.cloneNode(true));
                }
            } else {
                // Use other libraries/require systems to load files.
            } */

            // Method 3 : Using fetch() API
            fetch("./simple-interest-calculator.html")
                .then(response => {
                    return response.text()
                })
                .then(data => {
                    $('.container').html(data);
                });

            fetch("./components/header.html")
                .then(response => {
                    return response.text()
                })
                .then(data => {
                    document.querySelector("header").innerHTML = data;
                    let links = document.querySelectorAll("header #menu a");
                    links.forEach(link => {
                        link.addEventListener('click', loadCalculator);
                    })
                });

            function loadCalculator(event) {
                event.preventDefault();
                let chkMenu = document.querySelector('#toggleMenu');
                chkMenu.checked = false;

                fetch(event.target.href)
                    .then(response => {
                        return response.text();
                    })
                    .then(data => {
                        $('.container').html(data);
                        // let divElem = document.createElement('div');
                        // divElem.innerHTML = data;
                        // console.log(divElem.innerHTML);
                        // document.querySelector(".container").innerHTML = divElem.innerHTML;
                    });
            }
        });

        function savePreferences() {
            localStorage.setItem('Disclaimer_Visited', true);
            $('#disclaimerModal').modal('hide');
        }
    </script>
    <!-- <script src="./js/addToHome.js"></script> -->
    <script src="./service-worker-init.js"></script>
</body>

</html>
